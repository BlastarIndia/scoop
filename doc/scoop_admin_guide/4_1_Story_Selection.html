<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.70)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>4.1 Story Selection</TITLE>
<META NAME="description" CONTENT="4.1 Story Selection">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="sag.css">

<LINK REL="next" HREF="4_2_User_Diaries.html">
<LINK REL="previous" HREF="4_Scoop_Features.html">
<LINK REL="up" HREF="4_Scoop_Features.html">
<LINK REL="next" HREF="4_2_User_Diaries.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><A href="http://scoop.kuro5hin.org/"><IMG src="small_logo.jpg"></A><UL><LI><A href="sag.html">SAG Home</A></LI>
<LI><A href="1_Introduction.html"><SPAN CLASS="arabic">1</SPAN> Introduction</A></LI>
<LI><A href="2_Installation.html"><SPAN CLASS="arabic">2</SPAN> Installation</A></LI>
<LI><A href="3_Setup_Administration.html"><SPAN CLASS="arabic">3</SPAN> Setup and Administration</A></LI>
<LI><A href="4_Scoop_Features.html"><SPAN CLASS="arabic">4</SPAN> Scoop Features and Customization</A></LI>
<UL>
<LI><A href="4_1_Story_Selection.html" id="current"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">1</SPAN> Story Selection</A></LI>
<LI><A href="4_2_User_Diaries.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">2</SPAN> User Diaries</A></LI>
<LI><A href="4_3_Story_Archiving.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">3</SPAN> Story Archiving</A></LI>
<LI><A href="4_4_Story_Digest.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">4</SPAN> Story Digest Emails</A></LI>
<LI><A href="4_5_Story_Syndication.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">5</SPAN> Story Syndication (RDF)</A></LI>
<LI><A href="4_6_Story_hotlisting_bookma.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">6</SPAN> Story hotlisting/bookmarking</A></LI>
<LI><A href="4_7_Automatic_Related.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">7</SPAN> Automatic `Related Links' listing</A></LI>
<LI><A href="4_8_Comments_Comment.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">8</SPAN> Comments and Comment Views</A></LI>
<LI><A href="4_9_Polls.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">9</SPAN> Polls</A></LI>
<LI><A href="4_10_Spell_checking_Stories.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">10</SPAN> Spell-checking Stories and Comments</A></LI>
<LI><A href="4_11_Macros_in.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">11</SPAN> Macros in Stories and Comments</A></LI>
<LI><A href="4_12_Spam_Crapflood.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">12</SPAN> Spam and Crapflood Prevention</A></LI>
<LI><A href="4_13_Trusted_Users.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">13</SPAN> Trusted Users and Mojo</A></LI>
<LI><A href="4_14_Per_user_File.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">14</SPAN> Per-user File Uploads</A></LI>
<LI><A href="4_15_User_Subscriptions.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">15</SPAN> User Subscriptions</A></LI>
<LI><A href="4_16_User_submitted_Adverti.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">16</SPAN> User-submitted Advertisements</A></LI>
<LI><A href="4_17_Calendar.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">17</SPAN> Calendar</A></LI>
<LI><A href="4_18_Site_Layout.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">18</SPAN> Site Layout and Themes</A></LI>
<LI><A href="4_19_Flexible_Sections.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">19</SPAN> Flexible Sections and Categorization</A></LI>
<LI><A href="4_20_Searching_Relevance.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">20</SPAN> Searching by Relevance</A></LI>
<LI><A href="4_21_Page_Caching.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">21</SPAN> Page Caching</A></LI>
<LI><A href="4_22_Payment_Processing.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">22</SPAN> Payment Processing</A></LI>
<LI><A href="4_23_Admin_Action.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">23</SPAN> Admin Action Logging</A></LI>
<LI><A href="4_24_Access_Control.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">24</SPAN> Access Control While Upgrading</A></LI>
<LI><A href="4_25_Boxtool.html"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">25</SPAN> Boxtool</A></LI>
</UL>
<LI><A href="5_Extending_Scoop_s.html"><SPAN CLASS="arabic">5</SPAN> Extending Scoop's Abilities</A></LI>
<LI><A href="A_Admin_Tools.html">A. The Admin Tools Menu</A></LI>
<LI><A href="B_Scoop_Box.html">B. The Scoop Box Exchange</A></LI>
<LI><A href="C_Frequently_Asked.html">C. Frequently Asked Questions</A></LI>
<LI><A href="About_this_document.html">About this document ...</A></LI>
</UL>
</DIV>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL CLASS="ChildLinks">
<LI><A NAME="tex2html451"
  HREF="4_1_Story_Selection.html#SECTION00041100000000000000"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">1</SPAN>.<SPAN CLASS="arabic">1</SPAN> Story Queues</A>
<LI><A NAME="tex2html452"
  HREF="4_1_Story_Selection.html#SECTION00041200000000000000"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">1</SPAN>.<SPAN CLASS="arabic">2</SPAN> Vote Thresholds and Auto-post</A>
<LI><A NAME="tex2html453"
  HREF="4_1_Story_Selection.html#SECTION00041300000000000000"><SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">1</SPAN>.<SPAN CLASS="arabic">3</SPAN> Overriding the Voting Process</A>
</UL>
<!--End of Table of Child-Links-->
<HR>

<H2><A NAME="SECTION00041000000000000000"></A>
<A NAME="features-modsub"></A>
<BR>
<SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">1</SPAN> Story Selection
</H2>

<P>
Scoop's original concept was to make a discussion site where <B>all users had a say</B> in what stories were published, instead of one where only a few editors determined what was of interest.

<P>
To this end, Scoop has the ability to allow every user to submit an article for publication, and every user to vote on which articles they would like to see published or not.  

<P>
Submitted stories go into one of two queues; the ``edit'' queue is for stories that are seeking editorial feedback and are subject to editing by the author, and the ``voting'' queue is for stories that the author is satisfied with and is where the decision to publish or not is made.

<P>
All parameters relating to both queues can be changed by the site administrator, including:

<UL>
<LI>who may submit stories
</LI>
<LI>who may vote on stories
</LI>
<LI>who may make changes to their own stories in the edit queue
</LI>
<LI>how many votes it takes to publish or delete a story
</LI>
<LI>how long stories are allowed to stay in either queue
</LI>
</UL>

<P>
All of the variables referenced in the subsections below should be in the Stories category of the Site Controls.

<P>

<H3><A NAME="SECTION00041100000000000000"></A>
<A NAME="moderation-queues"></A>
<BR>
<SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">1</SPAN>.<SPAN CLASS="arabic">1</SPAN> Story Queues
</H3>

<P>
Permission to submit stories to the queue is given by the perm <B>story_post</B> (<A HREF="A_12_Groups.html#perm-story-post">A.12.45</A>), while permission to submit stories to the edit queue is given by the perm <B>edit_own_story</B> (<A HREF="A_12_Groups.html#perm-edit-own-story">A.12.23</A>).  

<P>
Depending on your site, you may want to allow anybody, even anonymous users, to submit stories; registered users only; or administrators only.

<P>
The voting queue is by default always turned on, but you can restrict who may vote by giving or removing the perm <B>moderate</B> (<A HREF="A_12_Groups.html#perm-moderate">A.12.35</A>) to select groups.  If you are using an ``open'' queue, where any member may vote on stories, the default group (Users, generally) should have this perm; if you are using a ``closed'' queue, where only administrators may vote on stories, the default group shouldn't have this perm, but the admins, or editors, or whichever group you are using for story selection, should.  Generally, the Anonymous group shouldn't have access to the voting queue, but you can do that if you find some reason for it.  Users place their votes for the story, and when one of the configurable thresholds (see section&nbsp;<A HREF="#moderation-autopost">4.1.2</A>) is reached, the story is either posted or dropped, according to the site configuration.

<P>
The edit queue is turned on by giving the perm <B>edit_own_story</B> (<A HREF="A_12_Groups.html#perm-edit-own-story">A.12.23</A>) to the user groups who should have access to the edit queue.  Stories in the edit queue are subject to change at any time, so voting in the poll and voting to post the story are both disabled.  Once the author chooses to move the story to voting, the edit queue time limit set in the variable <B>queue_edit_max_time</B> is reached, or a certain threshold of ``spam'' votes is reached (see section&nbsp;<A HREF="#moderation-autopost">4.1.2</A>), the story is moved to the edit queue and the author can no longer change anything.

<P>
If you are using a closed queue, ``edit categories'' may be useful.  Basically, it turns off the story voting mechanism; stories are posted when one of the editors makes an executive decision to post it by editing its properties (see appendix&nbsp;<A HREF="A_1_New_Story.html#admin-tools-new-story">A.1</A> for a description of the story edit form).  Several categories are created in the moderation queue, which the editors can use to keep track of which stories are at which stage of their evolution.  Edit categories only really work with a closed queue, because everything is done by editing the stories, which requires the perm <B>story_admin</B> (<A HREF="A_12_Groups.html#perm-story-admin">A.12.41</A>).

<P>

<H3><A NAME="SECTION00041200000000000000"></A>
<A NAME="moderation-autopost"></A>
<BR>
<SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">1</SPAN>.<SPAN CLASS="arabic">2</SPAN> Vote Thresholds and Auto-post
</H3>

<P>
Scoop has several configurable thresholds that determine story handling while in the queue.

<P>
The simplest is <B>the maximum time a story is allowed to stay in the edit queue</B>, which is set using the variable <B>queue_edit_max_time</B>.  If the time difference between ``now'' and when the story was created is greater than <B>queue_edit_max_time</B>, the story is moved to the voting queue.  If you need to put the story back into the edit queue after the time limit, you can edit the story (as an admin) and choose the ``Set Timestamp to Now'' checkbox while moving it into the edit queue.  If the timestamp is not changed, the story will not stay in the edit queue because Scoop will think it's been there too long.

<P>
The other edit queue threshold is the <B>anti-spam vote calculation</B>.  Because a story in the edit queue can't be voted down and would stay until the time limit is reached, a malicious author can be guaranteed his spam story will be visible for the duration of the edit queue time limit--which still needs to be long enough to be useful for editing.  To prevent this, there is a ``Spam'' button for a story in the edit queue, which users may click if they think a story is spam.  Each user visiting the story casts a neutral vote (per account, not per visit), and each user that clicks the spam button casts a spam vote (again, per account).  Once the number of spam votes set in the variable <B>spam_votes_threshold</B> is reached, on every subsequent vote Scoop divides the number of spam votes by the number of neutral votes and compares the resulting ratio to the ratio entered in the variable <B>spam_votes_percentage</B>.  If the calculated ratio is greater than the variable, the story is pushed directly into the voting queue.  At this point, it's generally voted down very quickly.

<P>
In the voting queue, there are several ways Scoop can decide when a story should be posted.  In the following descriptions, a vote to post the story, whether to the front page or to section, is counted as a value of +1; a vote to drop the story is counted as -1; and a vote to abstain (sometimes marked ``don't care'') is counted as 0.

<P>
<B>In the default posting calculation</B>, Scoop sums all the votes cast, then compares them to two variables.  If the sum of all votes is lower than or equal to the value in the variable <B>hide_story_threshold</B> the story is dropped.  If the sum of all votes is greater than or equal to the value in the variable <B>post_story_threshold</B>, Scoop then decides if it should be posted to the front page or the section.  The number of front page votes is divided by the total number of positive votes, and the resulting ratio is compared to the ratio entered in the variable <B>front_page_ratio</B>.  If the calculated ratio is greater than or equal to the variable, the story is posted to the front page.

<P>
If the variable <B>use_alternate_scoring</B> is turned on, Scoop compares positive votes and negative votes to the post and drop thresholds described above separately, instead of the sum of all votes.  This means that if a number of positive votes are cast that equal the number given in the variable post_story_threshold the story is posted, regardless of the number of negative votes--unless the negative votes reach their threshold first, regardless of positive votes.

<P>
There are also two possible ``auto-post'' triggers used when a story appears deadlocked in voting (this can never happen when <B>use_alternate_scoring</B> is turned on) and is unlikely to reach either of the thresholds.  The first is based on the number of votes cast, total; the second is based on the time the story has been in the voting queue.

<P>
If the variable <B>use_auto_post</B> is on and the variable <B>auto_post_use_time</B> is off, Scoop will start its auto-post calculations when the total number of votes reaches the number in the variable <B>end_voting_threshold</B>.

<P>
If the variable <B>use_auto_post</B> is on and the variable <B>auto_post_use_time</B> is also on, Scoop will start its auto-post calculations when the story has been in the voting queue for longer than the number of minutes in the variable <B>auto_post_max_minutes</B>.

<P>
Once the auto-post has been triggered by one of the above two methods, the calculations are the same; however, if the story's current score is less than the variable <B>auto_post_floor</B> the following calculations are skipped and the story is simply dropped.  

<P>
Scoop calculates an overall score for the story (described below) based on the votes it has gained so far, and an overall score for the comments (described below) based on the comments rated so far.  These two scores are averaged, then compared to the thresholds set in several variables to determine whether or not the story posts.

<P>
Scoop scales the overall story score so the two scores are using the same scale.  It assumes that normal comment rating starts at 1 and goes to the value set in the variable <B>rating_max</B>, so if your comment rating starts somewhere other than 1, you'll need to be careful of your threshold levels.

<P>
If the calculated average of the overall scores is greater than or equal to the value in the variable <B>auto_post_frontpage</B>, the story is posted to the front page.  If the average is greater than or equal to the value in the variable <B>auto_post_section</B>, the story is posted to the section page.  If the story's voting score is greater than the value in the variable <B>auto_post_ceiling</B> and the calculated average is so low the story would be dropped, the calculated average is overridden so that the story posts to the section.  This way, stories with a poor comment score that are very close to posting normally when they hit the auto-post wall will not be dropped.  The <B>auto_post_ceiling</B> variable should be set fairly close to the <B>post_story_threshold</B> variable so that the story is clearly about to post for this feature to take effect.

<P>
The <B>overall comment score</B> is a weighted average of the comment ratings; comments that have been rated more times affect the overall comment score more.  The individual comment score is multiplied by the number of ratings for that comment to get a weighted value for each comment.  The weighted values for all rated comments are then added together, then divided by the total number of ratings on all comments attached to the story.  If the total number of ratings is lower than the value in <B>auto_post_min_ratings</B>, the variable is used instead (the ``boring story penalty''; if not many comments are rated, it must not be a very interesting story).  Note that hidden comments are not counted toward either the overall comment score or the number of ratings total.

<P>
The <B>overall story score</B> is an average calculated from the post or drop votes cast in the voting queue.  Each of the possible votes (+1 front page, +1 section, abstain, -1 hide) is assigned a numerical value, with +1 front page being worth the same as the maximum comment rating, and -1 hide being worth 1.  The two other votes are assigned intermediate values based on <B>rating_max</B>.  For each vote option, the numerical value of the vote as described above is multiplied by the number of votes cast for that option.  These four values are added together, then divided by the total number of votes cast.

<P>

<H3><A NAME="SECTION00041300000000000000"></A>
<A NAME="moderation-override"></A>
<BR>
<SPAN CLASS="arabic">4</SPAN>.<SPAN CLASS="arabic">1</SPAN>.<SPAN CLASS="arabic">3</SPAN> Overriding the Voting Process
</H3>

<P>
As an admin, you can override the voting process in a couple of ways.

<P>
If you feel a story has been <B>voted into the wrong place</B>, or if there <B>aren't enough voters yet</B> to make a voting queue meaningful, you can edit the story using the ``Edit'' link (see appendix&nbsp;<A HREF="A_1_New_Story.html#admin-tools-new-story">A.1</A> to familiarize yourself with the story edit form) and set the drop-down box to, for example, ``Always Display'' if you feel it should be on the front page.  This is the preferred method if it's a one-time thing, or a temporary situation (such as not having enough users yet on a brand new site).

<P>
If you want to <B>bypass the queue entirely</B>, either for the entire site or just a specific section, for everybody or just certain groups, you can set the section permissions (see section&nbsp;<A HREF="4_19_Flexible_Sections.html#sections-perms">4.19.3</A> and appendix&nbsp;<A HREF="A_9_Sections.html#admin-tools-sections">A.9</A> for details) to allow the appropriate groups to auto-post to either section or front page for each relevant section.  This is a different auto-post than described above; this one does no calculations, but bypasses the queue entirely and automatically posts the story wherever the permissions specify.  This is the preferred method if you always want to bypass the queue in certain situations.

<P>

<HR>
<ADDRESS>
<I>janra <BR>
2005-02-27</I>
</ADDRESS>
</BODY>
</HTML>
